(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9641:(e,t,n)=>{Promise.resolve().then(n.bind(n,9236))},9236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var a=n(5155),r=n(2115),s=n(3463),i=n(9795);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.QP)((0,s.$)(t))}let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:l("rounded-xl border bg-card text-card-foreground shadow",n),...r})});u.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:l("flex flex-col space-y-1.5 p-6",n),...r})});d.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:l("font-semibold leading-none tracking-tight",n),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:l("text-sm text-muted-foreground",n),...r})}).displayName="CardDescription";let p=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:l("p-6 pt-0",n),...r})});p.displayName="CardContent",r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{ref:t,className:l("flex items-center p-6 pt-0",n),...r})}).displayName="CardFooter";let c=r.forwardRef((e,t)=>{let{className:n,type:r,...s}=e;return(0,a.jsx)("input",{type:r,className:l("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...s})});c.displayName="Input";var y=n(1290);let m=(0,n(652).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),f=r.forwardRef((e,t)=>{let{className:n,variant:r,size:s,asChild:i=!1,...u}=e,d=i?y.DX:"button";return(0,a.jsx)(d,{className:l(m({variant:r,size:s,className:n})),ref:t,...u})});f.displayName="Button";var b=n(4216),x=n(886),h=n(1054);let v="0x0000000000000000000000000000000000001234",g=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"miner",type:"address"},{indexed:!1,internalType:"bytes32",name:"nonce",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"prev_hash",type:"uint256"}],name:"Mined",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"BLOCK_REWARD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_DIFFICULTY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINE_SELECTOR",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"nonce",type:"bytes32"}],name:"mine",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"miner_params",outputs:[{internalType:"uint256",name:"last_block",type:"uint256"},{internalType:"uint256",name:"current_difficulty",type:"uint256"},{internalType:"uint256",name:"total_mined",type:"uint256"},{internalType:"uint256",name:"prev_hash",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"refund",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"takeFee",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],w=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),T=()=>{let[e,t]=(0,r.useState)(""),[n,s]=(0,r.useState)(""),[i,l]=(0,r.useState)(!1),[y,m]=(0,r.useState)([]),[T,N]=(0,r.useState)({difficulty:w.toString(),totalMined:0,balance:"0"}),j=(0,r.useRef)(!1),M=(0,r.useRef)(null),k=(0,r.useRef)(null);(0,r.useEffect)(()=>{M.current=new h.Ay$(new h.Ay$.providers.HttpProvider("https://pub1.aplocoin.com")),k.current=new M.current.eth.Contract(g,v)},[]);let B=async e=>{let t=await k.current.methods.miner_params(e).call();return{lastBlock:parseInt(t[0]),currentDifficulty:"0"===t[1]?w:BigInt(t[1]),totalMined:parseInt(t[2]),prevHash:BigInt(t[3])}},C=()=>BigInt("0x"+[...Array(64)].map(()=>Math.floor(16*Math.random()).toString(16)).join("")),_=(e,t,n,a,r)=>{let s=M.current,i=s.utils.encodePacked({value:t,type:"address"},{value:s.utils.padLeft(s.utils.toHex(e),64),type:"bytes32"},{value:n,type:"uint256"},{value:a,type:"uint256"},{value:r,type:"uint256"});return BigInt("0x"+s.utils.sha3(i).slice(2))},I=async t=>{for(;j.current;){let n=C(),a=_(n,e,t.currentDifficulty,t.prevHash,t.totalMined);if(a<t.currentDifficulty)return t.totalMined++,t.lastBlock=await M.current.eth.getBlockNumber(),t.prevHash=a,n;await new Promise(e=>setTimeout(e,100))}},A=async t=>{let a=M.current,r=a.utils.padLeft(a.utils.toHex(t),64),s=k.current.methods.mine(r),i=await s.estimateGas({from:e}),l=await a.eth.getGasPrice(),u=await a.eth.getTransactionCount(e,"pending"),d={from:e,to:v,data:s.encodeABI(),gas:i+BigInt(1e3),gasPrice:l,nonce:u},o=await a.eth.accounts.signTransaction(d,n);return await a.eth.sendSignedTransaction(o.rawTransaction)},S=async()=>{if(!e||!M.current)return;let t=await M.current.eth.getBalance(e);N(e=>({...e,balance:M.current.utils.fromWei(t,"ether")}))},R=async()=>{for(;j.current;)try{let t=await B(e);if(N(e=>({difficulty:t.currentDifficulty.toString(),totalMined:t.totalMined,balance:e.balance})),await M.current.eth.getBlockNumber()-BigInt(t.lastBlock)<BigInt(20)){await new Promise(e=>setTimeout(e,1e4));continue}let n=await I(t);if(!n||!j.current)break;let a=await A(n);m(e=>[{blockNumber:a.blockNumber,txHash:a.transactionHash,timestamp:new Date().toLocaleString()},...e]),t=await B(e),await S()}catch(e){console.error("Mining error:",e),j.current&&await new Promise(e=>setTimeout(e,5e3))}},E=async()=>{if(i)l(!1),j.current=!1;else{if(!e||!n){alert("Please enter wallet address and private key");return}l(!0),j.current=!0,R()}};return(0,r.useEffect)(()=>{if(i){let e=setInterval(S,3e4);return()=>clearInterval(e)}},[i,e]),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)(u,{children:[(0,a.jsx)(d,{children:(0,a.jsx)(o,{className:"text-2xl font-bold",children:"AploCoin Web Miner"})}),(0,a.jsxs)(p,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Wallet Address"}),(0,a.jsx)(c,{placeholder:"Enter your wallet address",value:e,onChange:e=>t(e.target.value),disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Private Key"}),(0,a.jsx)(c,{type:"password",placeholder:"Enter your private key",value:n,onChange:e=>s(e.target.value),disabled:i})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Current Difficulty"}),(0,a.jsx)("p",{className:"text-gray-600 truncate",children:T.difficulty})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Total Mined"}),(0,a.jsx)("p",{className:"text-gray-600",children:T.totalMined})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Balance"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[T.balance," APLO"]})]})]}),(0,a.jsx)(f,{className:"w-full mt-4",onClick:E,variant:i?"destructive":"default",disabled:!e||!n,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"})," Stop Mining"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Start Mining"]})})]})]}),(0,a.jsxs)(u,{children:[(0,a.jsx)(d,{children:(0,a.jsx)(o,{className:"text-xl font-bold",children:"Mined Shares"})}),(0,a.jsx)(p,{children:(0,a.jsx)("div",{className:"space-y-4",children:0===y.length?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"No shares mined yet"}):(0,a.jsx)("div",{className:"space-y-3",children:y.map((e,t)=>(0,a.jsx)("div",{className:"p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:["Block #",e.blockNumber]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 break-all",children:e.txHash})]}),(0,a.jsx)("span",{className:"text-sm text-gray-400",children:e.timestamp})]})},t))})})})]})]})};function N(){return(0,a.jsx)("main",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsx)(T,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[840,441,517,358],()=>t(9641)),_N_E=e.O()}]);